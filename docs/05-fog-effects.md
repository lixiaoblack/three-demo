# Three.js 雾效果详解

在 Three.js 中，雾效果是一种重要的大气效果，可以模拟真实世界中的雾、霾、烟等现象。雾效果会根据物体到相机的距离，逐渐将物体的颜色与雾的颜色混合，从而创造出深度感和空间感。

## 雾的类型

Three.js 提供了两种类型的雾效果：

### 1. 线性雾 (Fog)

线性雾是一种从起始距离到结束距离线性变化的雾效果。

```javascript
const fog = new THREE.Fog(color, near, far);
```

参数说明：
- `color`：雾的颜色
- `near`：开始应用雾效果的距离（到相机的距离）
- `far`：雾效果完全生效的距离（到相机的距离）

特点：
- 在 near 距离之前，物体保持原色
- 在 near 到 far 之间，物体颜色逐渐与雾色混合
- 在 far 距离之后，物体完全被雾色覆盖

### 2. 指数雾 (FogExp2)

指数雾是一种基于到相机距离的指数函数计算的雾效果，更接近现实中的雾。

```javascript
const fogExp2 = new THREE.FogExp2(color, density);
```

参数说明：
- `color`：雾的颜色
- `density`：雾的密度（通常在 0.0025 到 0.1 之间）

特点：
- 雾效果从相机位置开始逐渐增强
- 密度参数控制雾效果增强的速率
- 更自然的雾效果表现

## 使用方法

### 1. 添加雾效果到场景

```javascript
// 线性雾
scene.fog = new THREE.Fog(0xcccccc, 10, 50);

// 或指数雾
scene.fog = new THREE.FogExp2(0xcccccc, 0.02);
```

### 2. 移除雾效果

```javascript
scene.fog = null;
```

### 3. 更新雾效果参数

```javascript
// 更新线性雾参数
scene.fog.near = 20;
scene.fog.far = 60;
scene.fog.color.setHex(0xcccccc);

// 更新指数雾参数
scene.fog.density = 0.05;
scene.fog.color.setHex(0xcccccc);
```

## 性能考虑

1. 雾效果会对性能产生一定影响，因为需要为每个可见像素计算雾效果
2. 指数雾的计算比线性雾稍微复杂，可能会有轻微的性能差异
3. 在移动设备上使用时要谨慎设置参数，避免过度使用

## 最佳实践

1. **选择合适的雾类型**
   - 对于室外场景，指数雾通常更自然
   - 对于室内或特定效果，线性雾可能更合适

2. **颜色选择**
   - 雾的颜色通常应该与场景背景色协调
   - 可以使用略微偏白或偏灰的颜色来增加真实感

3. **参数调整**
   - 根据场景大小调整参数
   - 可以通过动态调整参数来创造天气变化效果

4. **与其他效果结合**
   - 可以与粒子系统结合创造更复杂的大气效果
   - 可以通过改变雾的颜色来模拟不同时间的大气效果

## 常见问题

1. **物体消失过快**
   - 检查 near 和 far 值是否合适
   - 考虑使用指数雾代替线性雾

2. **效果不明显**
   - 增加雾的密度
   - 确保雾的颜色与场景有足够的对比度

3. **效果不自然**
   - 调整参数使变化更加平滑
   - 考虑使用指数雾获得更自然的效果

## 示例应用

我们的 `FogDemo.vue` 组件展示了如何：

1. 在场景中切换不同类型的雾效果
2. 动态调整雾效果的参数
3. 通过控制面板实时预览效果
4. 结合动画展示雾效果的空间感

通过这个演示，你可以：
- 比较线性雾和指数雾的视觉差异
- 体验不同参数对雾效果的影响
- 了解如何在实际项目中应用雾效果 